#!/bin/bash

# Format markdown files
prettier --write '**/*.md' >/dev/null 2>&1

# Re-stage any formatted files
git diff --name-only | grep '\.md$' | xargs -r git add

# Run lint
if ! markdownlint '**/*.md'; then
    echo "markdownlint failed. Fix errors before committing."
    exit 1
fi
